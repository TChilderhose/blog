<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=author content="Tyler Childerhose"><meta name=description content="So here is a rough overview of how I have setup my repos and hosting environment."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Environment & Hosting Setup"><meta name=twitter:description content="So here is a rough overview of how I have setup my repos and hosting environment."><meta property="og:title" content="Environment & Hosting Setup"><meta property="og:description" content="So here is a rough overview of how I have setup my repos and hosting environment."><meta property="og:type" content="article"><meta property="og:url" content="https://tchilderhose.ca/posts/2021/04/env-setup/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-04-08T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-08T00:00:00+00:00"><meta property="og:see_also" content="https://tchilderhose.ca/posts/2021/04/hello-hugo/"><title>Environment & Hosting Setup · TChilderhose</title><link rel=canonical href=https://tchilderhose.ca/posts/2021/04/env-setup/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.1.7" as=font type=font/woff2 crossorigin><link href="//fonts.googleapis.com/css?family=Open+Sans:400,400i,600,700" rel=stylesheet><link rel=stylesheet href=/css/site.min.69bae50aa0a79eed13e303b7d8f355ba51cddf8b041e66f828dcada1a6735eb7.css integrity="sha256-abrlCqCnnu0T4wO32PNVulHN34sEHmb4KNytoaZzXrc=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.82.0"></head><body class="preload-transitions colorscheme-dark"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>TChilderhose</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/resume/>Resume</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://tchilderhose.ca/posts/2021/04/env-setup/>Environment & Hosting Setup</a></h1></div><div class=post-meta><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2021-04-08T00:00:00Z>2021-04-08</time></span>
&nbsp;
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
3-minute read</span>
&nbsp;
<span class=tags><i class="fa fa-tag" aria-hidden=true></i>
<a class=tag-link href=/tags/hugo/>hugo</a>
<span class=separator>•</span>
<a class=tag-link href=/tags/github/>github</a>
<span class=separator>•</span>
<a class=tag-link href=/tags/cloudflare/>cloudflare</a></span></div></header><div><p>So here is a rough overview of how I have setup my repos and hosting environment.</p><p>There is some details missing, especially around the <code>config.toml</code> and converting the files to use <code>yaml</code>. I would suggest reading some of the many hugo guides online and keep some of these ideas in the post in the back of your head.</p><h2 id=create-repos>Create Repos
<a class=heading-link href=#create-repos><i class="fa fa-link" aria-hidden=true></i></a></h2><p>I created two repos on GitHub. One private for all the source code and one public for the hosting. While the private repo&rsquo;s name doesn&rsquo;t matter too much, the public one needs to be <code>{github_username}.github.io</code> in order to use the root of the GitHub pages domain. For example, if the repo was named <code>hugo</code>, the url generated by GitHub pages would be <code>https://{github_username}.github.io/hugo</code>. I found this out the hard way, but cest la vie.</p><p>So my two repos are</p><ul><li><a href=https://github.com/TChilderhose/tchilderhose.github.io_source>https://github.com/TChilderhose/tchilderhose.github.io_source</a> (Private)</li><li><a href=https://github.com/TChilderhose/tchilderhose.github.io>https://github.com/TChilderhose/tchilderhose.github.io</a> (Public)</li></ul><h2 id=private-repo--hugo-setup>Private Repo + Hugo Setup
<a class=heading-link href=#private-repo--hugo-setup><i class="fa fa-link" aria-hidden=true></i></a></h2><p>I cloned my private repo to where I wanted my env setup and started setting up the site structure.</p><h3 id=grab-hugo-executable>Grab Hugo Executable
<a class=heading-link href=#grab-hugo-executable><i class="fa fa-link" aria-hidden=true></i></a></h3><p>The great thing that I really like about Hugo is that all you need is this executable and that&rsquo;s it. No dependencies or anything.</p><p>Go to the <a href=https://github.com/gohugoio/hugo/releases>Hugo GitHub repo</a> and get the latest <code>hugo extended</code> executable, which at the time of writing was <a href=https://github.com/gohugoio/hugo/releases/download/v0.82.0/hugo_extended_0.82.0_Linux-64bit.tar.gz>hugo_extended_0.82.0_Linux-64bit.tar.gz</a>. I extracted it into my repo and placed it into a <code>./bin/</code> folder.</p><h3 id=create-hugo-site>Create Hugo Site
<a class=heading-link href=#create-hugo-site><i class="fa fa-link" aria-hidden=true></i></a></h3><p>To create the site, I called</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>./bin/hugo new site temp
</code></pre></div><p>And copied all of the contents of <code>./temp</code> out and into the root directory. I think this would have worked as well</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>./bin/hugo new site --force . 
</code></pre></div><p>but I did it the hard way.</p><h3 id=grab-a-theme>Grab a theme
<a class=heading-link href=#grab-a-theme><i class="fa fa-link" aria-hidden=true></i></a></h3><p>I downloaded a theme as zip and placed it into the <code>./themes</code> folder. Guides online suggest either cloning or creating a submodule, but I knew I would be editing the theme a lot, so I decided to keep it tracked in my private repo.</p><h2 id=public-repo>Public Repo
<a class=heading-link href=#public-repo><i class="fa fa-link" aria-hidden=true></i></a></h2><p>In the root of the Private repo, I deleted the <code>./public/</code> folder and cloned the public repo to that folder</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone https://github.com/TChilderhose/tchilderhose.github.io public
</code></pre></div><p>The way that hugo works, is that it builds the entire site into that folder (by default). So you can copy that folder somewhere and you have the whole compiled site. Which is what we want for when we deploy to GitHub pages.</p><p>So I make a build to test it out and push it up</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>./bin/hugo

cd public
git add .
git commit -m <span style=color:#e6db74>&#34;Latest build&#34;</span>
git push origin master
cd -
</code></pre></div><p>I&rsquo;ve made a few helper scripts and shortcuts which I will talk about in a different post.</p><h2 id=hosting-setup>Hosting Setup
<a class=heading-link href=#hosting-setup><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Once it&rsquo;s pushed up, go to the GitHub repo&rsquo;s settings, scroll down to the <code>GitHub Pages</code> section and select the <code>master</code> or <code>main</code> branch from the dropdown and click save. This will deploy the site to <code>https://{github_username}.github.io</code>.</p><p>Now each time the repo is updated, it will re-deploy the site. Neat.</p><h2 id=dns-setup>DNS Setup
<a class=heading-link href=#dns-setup><i class="fa fa-link" aria-hidden=true></i></a></h2><p>This is the part that I didn&rsquo;t find a lot of information online and had to tinker a bunch with. I wanted to use my own domain, <code>tchilderhose.ca</code>, for the site. But I also wanted all the subdomains to go to my home server.</p><p>This is basically what I did to get it to work on Cloudflare.
<img src=cloudflare.png alt title="Cloudflare DNS settings"></p><ul><li><code>A</code> setting is set to wildcard and points to my home server&rsquo;s ip.</li><li>Two <code>CNAME</code>, <code>@</code> (or <code>tchilderhose.ca</code>) and <code>www</code> and pointed it to tchilderhose.github.io</li></ul><p>Then back on the <code>GitHub Pages</code> settings for the repo, I set the <code>Custom domain</code> field with my domain. This adds a <code>CNAME</code> file in repo with the domain.</p><p>Once I did this, the site was using <a href=https://tchilderhose.ca>https://tchilderhose.ca</a>!</p></div><footer><section class=see-also><h3 id=see-also-in-hugo>See also in hugo
<a class=heading-link href=#see-also-in-hugo><i class="fa fa-link" aria-hidden=true></i></a></h3><nav><ul><li><a href=/posts/2021/04/hello-hugo/>Hello Hugo</a></li></ul></nav></section></footer></article></section></div></main><script src=/js/coder.min.235666b114443867d43eeb5799d51f6252965e5163f338285e113fa381d3d27e.js integrity="sha256-I1ZmsRREOGfUPutXmdUfYlKWXlFj8zgoXhE/o4HT0n4="></script></body></html>